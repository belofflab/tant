from aiogram import types
from keyboards.user import inline
from loader import dp
from .menu import start
from typing import Union
from data.config import ASKEZA

WORKER_NAME = "–ù–∞—Ç–∞–ª—å–µ"
WORKER_USERNAME = "Natali_numerologist"

askeza_buttons = {
    "0": {
        "text": "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?",
        "description": """
‚úÖ–û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–º–µ—Ä–µ–Ω–∏–µ. –ù–∞ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –±–µ—Ä–µ–º –∞—Å–∫–µ–∑—É. –£ –≤—Å–µ—Ö –æ–Ω–∞ —Å–≤–æ—è. 

‚úÖ–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—á–∏—â–µ–Ω–∏–µ) 

‚úÖ–û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–º–µ—Ä–µ–Ω–∏–µ. –†–∞–¥–∏ –∫–∞–∫–æ–π —Ü–µ–ª–∏/–∂–µ–ª–∞–Ω–∏—è –¥–µ—Ä–∂–∏–º –∞—Å–∫–µ–∑—É (–≤—Å–µ —ç—Ç–æ —Ç–∞–∫–∂–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ)

‚úÖ–ü–∏—à–µ–º –∑–∞—è–≤–ª–µ–Ω–∏–µ. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞. –ö–∞–∂–¥–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

‚úÖ–ò–∑—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∞—Å–∫–µ–∑—ã 

‚úÖ–£–∂–µ –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∞—Å–∫–µ–∑—ã –≤—ã –Ω–∞—á–Ω–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–∏—è—Ç–Ω—ã–µ –±–æ–Ω—É—Å—ã, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç, —á—Ç–æ –≤—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏

‚úÖ–£—á–∏–º—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å 

‚úÖ–ù–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –∞—Å–∫–µ–∑—ã –≤—ã —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–∏—Ç—É–∞–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç —ç–∫—Å–ø–µ—Ä—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫–∂–µ –ø—Ä–∏–±–ª–∏–∂–∞—é—Ç –≤–∞—Å –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é –∂–µ–ª–∞–Ω–∏—è 

‚úÖ–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ –∞—Å–∫–µ–∑—ã
""",
    },
    "1": {
        "text": "–ü—Ä–∏–º–µ—Ä—ã –∞—Å–∫–µ–∑",
        "description": """
–ó–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∞—Å–∫–µ–∑.

‚ùå–û—Ç–∫–∞–∑ –æ—Ç –∞–ª–∫–æ–≥–æ–ª—è 
‚ùå–û—Ç–∫–∞–∑ –æ—Ç –∫—É—Ä–µ–Ω–∏—è 
‚ùå–û—Ç–∫–∞–∑ –æ—Ç –º–∞—Ç–µ—Ä–Ω—ã—Ö —Å–ª–æ–≤
‚ùå–û—Ç–∫–∞–∑ –æ—Ç –∫–æ—Ñ–µ–∏–Ω–∞ 
‚ùå–û—Ç–∫–∞–∑ –æ—Ç —Å–∞—Ö–∞—Ä–∞
‚ùå–û—Ç–∫–∞–∑ –æ—Ç –º—É—á–Ω–æ–≥–æ 
‚ùå–û—Ç–∫–∞–∑ –æ—Ç –º–æ–ª–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ 

‚úÖ 10 000 —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å 
‚úÖ –º—ã—Ç—å –ø–æ—Å—É–¥—É –Ω–∞ –Ω–æ—á—å 
‚úÖ–§–∏–∑–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 
‚úÖ–†–∞–Ω–Ω–∏–π –ø–æ–¥—ä–µ–º  (—Å–æ–±–ª—é–¥–∞—Ç—å —Ä–µ–∂–∏–º)
‚úÖ–ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥
‚úÖ–í—ã—É—á–∏—Ç—å –±–∏–ª–µ—Ç—ã –ü–î–î
‚úÖ–ü—Ä–æ–π—Ç–∏ –æ–±—É—á–µ–Ω–∏–µ 
‚úÖ–û–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ 
‚úÖ–õ—é–±–æ–≤—å –∫ —Å–µ–±–µ, –∞ –Ω–µ —Å–∞–º–æ–∏—Å—Ç—è–∑–∞–Ω–∏–µ
""",
    },
    "2": {
        "text": "–î–ª—è –∫–æ–≥–æ –ø–æ–¥–æ–π–¥–µ—Ç",
        "description": """
ü™Ñ –ö—Ç–æ –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –Ω–µ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å —Å–µ–±—è –≤ —Ä—É–∫–∏ 

ü™Ñ –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–¥–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ 

ü™Ñ –ö—Ç–æ —Ö–æ—á–µ—Ç –≤—ã—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∞–º–æ–¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É 

ü™Ñ –ü—Ä–æ–π—Ç–∏ –æ–±—É—á–µ–Ω–∏–µ –≤–æ–≤—Ä–µ–º—è 

ü™Ñ –ü—Ä–∏–≤–µ—Å—Ç–∏ —Å–≤–æ–µ —Ç–µ–ª–æ –∏ –∫–æ–∂—É –≤ –ø–æ—Ä—è–¥–æ–∫ 

ü™Ñ –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π —à–∞–≥ –Ω–∞ –≤—Å—Ç—Ä–µ—á—É —Å–≤–æ–∏–º —Ü–µ–ª—è–º –∏ –∂–µ–ª–∞–Ω–∏—è–º 

ü™Ñ –ù–∞—É—á–∏—Ç—å—Å—è –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∞—Å–∫–µ–∑—ã

ü™Ñ –ü–æ–ª—É—á–∏—Ç—å –º–æ—â–Ω—ã–π –∑–∞—Ä—è–¥ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –≤–ø–µ—Ä–µ–¥
""",
    },
    "3": {
        "text": "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å",
        "description": f"""
–ï—Å–ª–∏ –≤—ã –≤—Å–µ –µ—â—ë –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–Ω—è—Ç—å –Ω—É–∂–Ω–∞ –ª–∏ –≤–∞–º –∞—Å–∫–µ–∑–∞, –Ω–µ –º–æ–∂–µ—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è –Ω–∞ —á—Ç–æ –±—Ä–∞—Ç—å –∞—Å–∫–µ–∑—É –∏–ª–∏ –∫–∞–∫–æ–µ –∂–µ–ª–∞–Ω–∏–µ/—Ü–µ–ª—å –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç—å –ü–∏—à–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è {WORKER_NAME} 
üëáüèª

@{WORKER_USERNAME}

¬´–ê—Å–∫–µ–∑–∞. –í–æ–ø—Ä–æ—Å¬ª (–∑–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å)
""",
    },
    "4": {
        "text": "–°—Ç–æ–∏–º–æ—Å—Ç—å/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
        "description": """
–°—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è.
–î–ª—è —Ç–µ—Ö –∫—Ç–æ –≤—Å—Ç—É–ø–∏–ª 

–î–æ –Ω–æ–≤–æ–≥–æ –≥–æ–¥–∞ - 500‚ÇΩ
–ü–æ—Å–ª–µ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞ - 800‚ÇΩ

–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 21 –¥–µ–Ω—å (—Å 12.01 - –ø–æ 01.02)
""",
    },
    "5": {
        "text": "–ü—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ",
        "description": f"""
–ï—Å–ª–∏ –≤—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π –∞—Å–∫–µ–∑–µ —Å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ–º –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è {WORKER_NAME} 
üëáüèª

@{WORKER_USERNAME}

¬´–•–æ—á—É —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∞—Å–∫–µ–∑–µ¬ª
""",
    },
}

ASKEZA_DESCRIPTION = """
–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã –≤–Ω–µ–¥—Ä–∏—à—å –∞—Å–∫–µ–∑—É –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å —Ç—ã —Å—Ç–∞–Ω–µ—à—å —á–µ–ª–æ–≤–µ–∫–æ–º-–º–∞–≥–Ω–∏—Ç–æ–º –∫–æ—Ç–æ—Ä—ã–π –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å –≤—Å–µ –±–ª–∞–≥–∞ –º–∏—Ä–∞. üßöüèª‚Äç‚ôÄÔ∏è 

<b>–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç.</b>

- –ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–∞–∫—Ç–∏–∫—É–µ—Ç –∞—Å–∫–µ–∑—É —Å 2021 –≥–æ–¥–∞. 

- –ë–æ–ª–µ–µ 350 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ—à–ª–∏ –∞—Å–∫–µ–∑—É –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ.

<b>–ö–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –∂–µ–ª–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –∞—Å–∫–µ–∑—ã üëáüèª</b>

–ü—Ä–∏–≤–µ–¥—É –ø—Ä–∏–º–µ—Ä:

–£ –≤–∞—Å –±—ã–ª–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫—É—Ä–µ–Ω–∏—è. 
–í—ã –±–µ—Ä–µ—Ç–µ –∞—Å–∫–µ–∑—É –Ω–∞ –æ—Ç–∫–∞–∑. 
–£ –≤–∞—Å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–Ω–µ—Ä–≥–∏–∏ –∫–æ—Ç–æ—Ä–∞—è –≤—ã—Å–≤–æ–±–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–∑—è—Ç–æ–π –∞—Å–∫–µ–∑—ã –∏ –≤—Å—è —ç—Ç–∞ —ç–Ω–µ—Ä–≥–∏—è –ø–æ–π–¥–µ—Ç –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –∂–µ–ª–∞–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —É–∫–∞–∂–µ—Ç–µ –≤ –∑–∞—è–≤–ª–µ–Ω–∏–∏.

–í–∞–∂–Ω–æ –±—Ä–∞—Ç—å –∞—Å–∫–µ–∑—É –∫–æ—Ç–æ—Ä–∞—è –≤–∞–º —Å–ª–æ–∂–Ω–æ –¥–∞–µ—Ç—Å—è —Ç–∞–∫ –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ç–∞–º –æ–≥—Ä–æ–º–Ω—ã–π —Ä–µ—Å—É—Ä—Å –∫–æ—Ç–æ—Ä—ã–π –≤—ã –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ –≤ –Ω—É–∂–Ω–æ–µ —Ä—É—Å–ª–æ. 

–ê –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞—Ç—å –º—ã –Ω–∞—É—á–∏–º ü´∂üèª
"""


async def list_buttons(
    callback: Union[types.CallbackQuery, types.Message], worker: str, **kwargs
):
    if isinstance(callback, types.CallbackQuery):
        await callback.message.edit_media(
            media=types.InputMediaPhoto(
                media=types.InputFile(ASKEZA), caption=ASKEZA_DESCRIPTION
            ),
            reply_markup=types.InlineKeyboardMarkup(row_width=1).add(
                *[
                    types.InlineKeyboardButton(
                        text=value["text"],
                        callback_data=inline.make_askeza_cd(
                            level=2, worker=worker, content_type=key
                        ),
                    )
                    for key, value in askeza_buttons.items()
                ],
                types.InlineKeyboardButton(
                    text="–ù–∞–∑–∞–¥",
                    callback_data=inline.make_askeza_cd(level=0, worker=worker),
                ),
            ),
        )
    elif isinstance(callback, types.Message):
        await callback.answer_photo(
            photo=types.InputFile(ASKEZA),
            caption=ASKEZA_DESCRIPTION,
            reply_markup=types.InlineKeyboardMarkup(row_width=1).add(
                *[
                    types.InlineKeyboardButton(
                        text=value["text"],
                        callback_data=inline.make_askeza_cd(
                            level=2, worker=worker, content_type=key
                        ),
                    )
                    for key, value in askeza_buttons.items()
                ],
                types.InlineKeyboardButton(
                    text="–ù–∞–∑–∞–¥",
                    callback_data=inline.make_askeza_cd(level=0, worker=worker),
                ),
            ),
        )


async def show_button(
    callback: types.CallbackQuery, worker: str, content_type: str, content_page: str
):
    await callback.message.edit_caption(
        askeza_buttons[content_type]["description"],
        reply_markup=types.InlineKeyboardMarkup(row_width=1).add(
            types.InlineKeyboardButton(
                text="–ù–∞–∑–∞–¥",
                callback_data=inline.make_askeza_cd(level=1, worker=worker),
            )
        ),
    )


@dp.callback_query_handler(inline.askeza_cd.filter())
async def askeza_navigate(callback: types.CallbackQuery, callback_data: dict) -> None:
    level = callback_data.get("level")
    worker = callback_data.get("worker")
    content_type = callback_data.get("content_type")
    content_page = callback_data.get("content_page")

    levels = {"0": start, "1": list_buttons, "2": show_button}

    current_level_function = levels[level]

    await current_level_function(
        callback, worker=worker, content_type=content_type, content_page=content_page
    )
