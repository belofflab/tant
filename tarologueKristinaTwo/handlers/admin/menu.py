from aiogram import types

from database import models
from keyboards.admin import inline
from loader import dp
from filters.is_admin import IsAdmin


@dp.message_handler(IsAdmin(), commands="setup")
async def setup(message: types.Message) -> None:
    service_types = [
        {"idx": 1, "name": "ĞœĞ¾Ğ¸ ÑƒÑĞ»ÑƒĞ³Ğ¸"},
        {"idx": 2, "name": "Ğ Ğ¸Ñ‚ÑƒĞ°Ğ»Ñ‹"},
    ]

    if not len(await models.ServiceType.query.gino.all()) > 0:
        for service_type in service_types:
            await models.ServiceType.create(**service_type)

    await models.Service.delete.gino.status()

    services = [
        {
            "name": "ĞĞ´Ğ¸Ğ½ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ ğŸŒ·",
            "type": 1,
            "description": """
1. ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ:
Â«Ğ¥Ğ¾Ñ‡Ñƒ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ½Ğ° Ğ¾Ğ´Ğ¸Ğ½ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ
2. Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¹ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ 
3. ĞŸÑ€Ğ¸ÑˆĞ»Ğ¸Ñ‚Ğµ ÑĞ²Ğ¾Ñ ÑĞ²ĞµĞ¶ÑƒÑ Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ 
4. Ğ’ÑĞµ ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¸ÑˆĞ»Ğ¸Ñ‚Ğµ Ğ¼Ğ½ĞµğŸ‘‰ @{worker}

""",
            "amount": "800",
        },
        {
            "name": "Ğ”Ğ²Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ° ğŸŒ·",
            "type": 1,
            "description": """
 1. ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ:
Â«Ğ¥Ğ¾Ñ‡Ñƒ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ½Ğ° Ğ´Ğ²Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ°
 2. Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¸ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹
 3. ĞŸÑ€Ğ¸ÑˆĞ»Ğ¸Ñ‚Ğµ ÑĞ²Ğ¾Ñ ÑĞ²ĞµĞ¶ÑƒÑ Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ 
 4. Ğ’ÑĞµ ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¸ÑˆĞ»Ğ¸Ñ‚Ğµ Ğ¼Ğ½Ğµ ğŸ‘‰ @{worker}

""",
            "amount": "1550",
        },
        {
            "name": "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€ Ğ²Ğ°ÑˆĞµĞ¹ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞ¼Ğµ ğŸŒ·",
            "type": 1,
            "description": """
1. Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹ - Ñ‚ĞµĞ¼Ñ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼: 1. Ğ’Ğ°ÑˆĞµ Ñ„Ğ¸Ğ½.ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ³Ğ¾Ğ´Ğ°, Ğ±ÑƒĞ´ĞµÑ‚ Ğ»Ğ¸ Ñ€Ğ¾ÑÑ‚ Ğ² Ğ´ĞµĞ½ÑŒĞ³Ğ°Ñ…? 2. ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ğ±Ğ¸Ñ‚ÑŒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ñ‚Ğ¾Ğ»Ğ¾Ğº 3. Ğ§Ñ‚Ğ¾ Ğ¼ĞµÑˆĞ°ĞµÑ‚ Ğ²Ğ°ÑˆĞµĞ¼Ñƒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¼Ñƒ Ñ€Ğ¾ÑÑ‚Ñƒ? 4. Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ’Ğ°Ğ¼ Ğ·Ğ°Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞµ 2-3 Ğ¼ĞµÑÑÑ†Ğ°? 5. Ğ”ĞµĞ½ÑŒĞ³Ğ¸ ÑƒÑ‚ĞµĞºĞ°ÑÑ‚ ÑĞºĞ²Ğ¾Ğ·ÑŒ Ğ¿Ğ°Ğ»ÑŒÑ†Ñ‹ ? 
2. Ğ‘Ğ¸Ğ·Ğ½ĞµÑ - Ñ‚ĞµĞ¼Ñ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ : 1. Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ñ€Ğ°ÑÑ‚Ğ¸ Ğ²Ğ°ÑˆĞµĞ¼Ñƒ Ğ´ĞµĞ»Ñƒ/Ğ±Ğ¸Ğ·Ğ½ĞµÑÑƒ? 2. Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ½ĞµÑÑ‘Ñ‚ Ğ’Ğ°Ğ¼ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ´ĞµĞ»Ğ¾/Ğ±Ğ¸Ğ·Ğ½ĞµÑ, ĞµÑĞ»Ğ¸ Ğ·Ğ°Ğ¹Ğ¼ĞµÑ‚ĞµÑÑŒ ÑÑ‚Ğ¸Ğ¼ ? 
3. Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° - Ñ‚ĞµĞ¼Ñ‹ , ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ : 1. Ğ§Ñ‚Ğ¾ Ğ´Ğ°ÑÑ‚ Ğ’Ğ°Ğ¼ Ğ½Ğ¾Ğ²Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°? 2. Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°: ÑƒÑ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¾ÑÑ‚Ğ°Ñ‚ÑŒÑÑ ?
4. ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ- Ñ‚ĞµĞ¼Ñ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼: 1. Ğ‘Ğ»ÑĞ´ÑƒĞ½ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ»Ğ¾ÑÑŒ? 2. Ğ§Ñ‚Ğ¾ Ğ¶Ğ´Ñ‘Ñ‚ Ğ¿Ğ°Ñ€Ñƒ Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ³Ğ¾Ğ´Ñƒ? 3. ĞšĞ¾Ğ³Ğ´Ğ° Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ‚Ğ¾Ğ³Ğ¾ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾? ĞŸĞ°ÑƒĞ·Ğ° Ğ¸Ğ»Ğ¸ Ñ‚Ğ¾Ñ‡ĞºĞ° ? Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ ÑÑ‚Ğ¸Ñ… Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğ¹ ( ĞµÑĞ»Ğ¸ Ğ½ĞµĞ´Ğ°Ğ²Ğ½Ğ¾ Ğ¿Ğ¾Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ğ»Ğ¸ÑÑŒ )? 4. ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ° Ñ‚Ğ²Ğ¾ĞµĞ¹ Ğ¼ĞµÑ‡Ñ‚Ñ‹ ? 5. Ğ›ÑĞ±Ğ¾Ğ²Ğ½Ñ‹ Ñ‚Ñ€ĞµÑƒĞ³Ğ¾Ğ»ÑŒĞ½Ğ¸Ğº? 6.ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ ?7.Ğ Ğ°ÑĞºĞ»Ğ°Ğ´ Ğ½Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´ĞµÑ‚ÑĞºĞ¾Ğ³Ğ¾ ÑĞ°Ğ´Ğ°/ÑˆĞºĞ¾Ğ»Ñ‹/ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ¸Ñ‚ĞµÑ‚Ğ° Ğ´Ğ»Ñ Ñ€ĞµĞ±ĞµĞ½ĞºĞ° ( ÑÑ‚Ğ¾Ñ‚ Ñ€Ğ°ÑĞºĞ»Ğ°Ğ´ Ğ½Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑƒÑ‡Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸ÑĞ¼Ğ¸, Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºĞ°ĞºĞ¸Ğ¼Ğ¸ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚Ğµ,Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ³Ğ´Ğµ Ñ€ĞµĞ±ĞµĞ½Ğ¾Ğº Ğ±ÑƒĞ´ĞµÑ‚ Ğ² Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞ¼  ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸, ĞºĞ°Ğº Ğ±ÑƒĞ´ÑƒÑ‚ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ÑÑ Ğ²Ğ¾ÑĞ¿Ğ¸Ñ‚Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¸ Ğ³Ğ´Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¿ĞµĞºÑ‚Ğ¸Ğ²Ñ‹, ĞµÑĞ»Ğ¸ ÑÑ‚Ğ¾ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ¸Ñ‚ĞµÑ‚)   
5. Ğ Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€ Ñ Ğ¿Ğ¾Ğ´ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ½Ğ° Ğ¾Ğ´Ğ½Ñƒ Ğ¸Ğ· Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚ĞµĞ¼: 1)Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞµ Ñ- Ñ€Ğ°Ğ·Ğ±ĞµÑ€ĞµĞ¼ Ğ²Ğ°ÑˆĞ¸ ÑÑ‚Ñ€Ğ°Ñ…Ğ¸ Ğ¸ Ğ½Ğ°Ğ¹Ğ´ĞµĞ¼ Ğ²Ğ°ÑˆÑƒ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ 2)Ğ´ĞµĞ½ÑŒĞ³Ğ¸ - Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€ Ğ¾ Ğ´ĞµĞ½ÑŒĞ³Ğ°Ñ… Ğ¸ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğ¸ Ğº Ğ½Ğ¸Ğ¼ Ñ Ğ¿Ğ¾Ğ´ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸ĞµĞ¼ ) 
6. ĞĞ²Ñ‚Ğ¾Ñ€ÑĞºĞ¸Ğµ Ñ€Ğ°ÑĞºĞ»Ğ°Ğ´Ñ‹: 1. Ğ Ğ°ÑĞºĞ»Ğ°Ğ´ ĞºĞ°Ğº Ğ¿Ñ€Ğ¾Ğ¹Ğ´Ñ‘Ñ‚ Ğ¾Ñ‚Ğ¿ÑƒÑĞº? 2. Ğ Ğ°ÑĞºĞ»Ğ°Ğ´ ÑÑ‚Ñ€Ğ°ÑˆĞ½Ñ‹Ğ¹/ ÑÑ‚Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑĞ¾Ğ½? 3. ĞŸÑƒÑ‚ÑŒ Ğº Ğ¼Ğ¾ĞµĞ¼Ñƒ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ñ ? Ğ Ğ°ÑĞºĞ»Ğ°Ğ´ Ğ½Ğ° Ğ³Ğ¾Ğ´ Ğ½Ğ° Ğ²ÑĞµ ÑÑ„ĞµÑ€Ñ‹ Ğ¶Ğ¸Ğ·Ğ½Ğ¸?
ğŸ‘‰ @{worker}
""",
            "amount": "2800",
        },
        {
            "name": "Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ğ´ĞµĞ½ĞµĞ¶Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ°Ğ½Ğ°Ğ»Ğ°",
            "type": 2,
            "description": """
Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ğ´ĞµĞ½ĞµĞ¶Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ°Ğ½Ğ°Ğ»Ğ° + Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ½Ğ° ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹. Ğ Ğ¸Ñ‚ÑƒĞ°Ğ» Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ²Ğ°Ğ¼Ğ¸ ÑĞ°Ğ¼Ğ¾ÑÑ‚Ğ¾ÑÑ‚ĞµĞ»ÑŒĞ½Ğ¾. Ğ¯ Ğ´Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ, Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ÑƒÑ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ. 
ğŸ‘‰ @{worker}
""",
            "amount": "550",
        },
        {
            "name": "Ğ¡Ğ½ÑÑ‚Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğ¹ ÑĞ¾ Ğ²ÑĞµÑ… Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ¾Ñ€Ğ¾Ğ³",
            "type": 2,
            "description": """
ĞÑ‚Ğ»Ğ¸Ğ²ĞºĞ° ÑĞ²ĞµÑ‡Ğ°Ğ¼Ğ¸ Â«Ğ¡Ğ½ÑÑ‚Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğ¹ ÑĞ¾ Ğ²ÑĞµÑ… Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ¾Ñ€Ğ¾Ğ³Â»( Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ, Ğ´ĞµĞ½ÑŒĞ³Ğ¸, Ğ±Ğ¸Ğ·Ğ½ĞµÑ)
ğŸ‘‰ @{worker}
""",
            "amount": "2000",
        },
        {
            "name": "Ğ”ĞµĞ½ĞµĞ¶Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·",
            "type": 2,
            "description": """
Ğ”ĞµĞ½ĞµĞ¶Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·, Ñ‡ĞµÑ€ĞµĞ· ĞºĞ°ĞºÑƒÑ ÑÑ„ĞµÑ€Ñƒ Ğ¿Ñ€Ğ¸Ğ´ÑƒÑ‚ Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ² 2024Ğ³. + Ğ·Ğ°ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½, ÑÑ‚Ğ°Ñ€ÑˆĞ¸Ğµ Ğ°Ñ€ĞºĞ°Ğ½Ñ‹ ĞºĞ°Ñ€Ñ‚ Ğ¢Ğ°Ñ€Ğ¾, Ğ´Ğ»Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° 
ğŸ‘‰ @{worker}
""",
            "amount": "400",
        },
    ]

    for service in services:
        await models.Service.create(**service)

    await message.answer("ok")


@dp.message_handler(IsAdmin(), commands="admin")
async def admin_menu(message: types.Message) -> None:
    markup = await inline.menu_keyboard()
    users = await models.User.query.gino.all()
    await message.answer(
        f"""
Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ: 
Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹: {len(users)}
""",
        reply_markup=markup,
    )


@dp.callback_query_handler(IsAdmin(), lambda c: c.data == "admin_menu")
async def admin_menu_c(callback: types.CallbackQuery) -> None:
    markup = await inline.menu_keyboard()

    await callback.message.edit_reply_markup(reply_markup=markup)
